<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <meta name="render" content="webkit">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="format-detection" content="telephone=no">
    <!-- <meta  http-equiv="Cache-Control" content="no-cach,no-store,must-revalidate">    -->
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- <style>
        .product{
            width: 450px;
        }
        .product-price{
            float: right;
        }
        .total{
            float: right;
        }
        input[type='text']{
            width: 50px;
        }
    </style> -->
    <title>套餐表</title>
    <link rel="stylesheet" href="./css/cart.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/base.css">
</head>
<body>
<div>

    <header class="head_title"><span class="glyphicon glyphicon-heart-empty"></span>套餐表</header>
    <div class="store">
        <div class="content-width">
            <div class="product"><span class="span_title">1.孕12周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span><b class="product-one-price color_red">4280</b>
                </div>
                <div class="content_gd">详细内容<span class="glyphicon glyphicon-menu-down"></span></div>
            </div>
            <div class="content_xx content_none">
                 <ul>
                     <li class="li_title">健康资讯及体检
                     </li>
                     <li class="li_title">化验
                        <ul class="ul_content">
                            <li>血、尿常规、凝血四项</li>
                            <li>ABO+Rh血型鉴定</li>
                            <li>肝功能五项、肾功四项</li>
                            <li>甲功三项</li>
                            <li>乙肝五项、丙肝抗体定量</li>
                            <li>梅毒二项、人体免疫缺陷病毒（HIV）</li>
                            <li>血清铁蛋白检测</li>
                            <li>G6PD、地贫</li>
                            <li>空腹血糖、血脂四项</li>
                            <li>早孕期唐氏血清学筛查</li>
                            <li>静脉采血</li>
                            <li>阴道分泌物常规检查、细菌性阴道病</li>
                        </ul>
                     </li>
                     <li class="li_title">辅助检查
                         <ul class="ul_content">
                             <li>产科NT及各脏器彩超</li>
                             <li>心电图检查</li>
                             <li>多普勒听胎心</li>
                         </ul>
                     </li>
                 </ul>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product"><span class="span_title">2.16周</span>
                <input  class="product-check" type="checkbox"/>
                <div class="product-price">
                    <span>总价：￥</span><b class="product-one-price color_red">780</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product"><span class="span_title">3.20周</span>
                <input  class="product-check" type="checkbox"/>
                <div class="product-price">
                    <span>总价：￥</span><b class="product-one-price color_red">1280</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product"><span class="span_title">4.24周</span>
                <input  class="product-check" type="checkbox"/>
                <div class="product-price">
                    <span>总价：￥</span><b class="product-one-price color_red">780</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">5.28周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">480</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">6.30周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">800</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">7.32周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">480</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">8.34周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">580</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">9.36周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">980</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">10.37周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">780</b> 
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">11.38周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">480</b>
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="content-width">
            <div class="product">
                <span class="span_title">12.39-41周</span>
                <input class="product-check" type="checkbox" />
                <div class="product-price">
                    <span>总价：￥</span>
                    <b class="product-one-price color_red">480</b>
                </div>
            </div>
        </div>
        <footer>
            <!-- <input  class="store-check" type="checkbox"/> -->
            <span>合计：￥</span>
            <b class="store-total-price">0.00</b>
            <button class="yuyue">预约</button>
        </footer>
    </div>

</div>
<script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
<script>

    // 点击商品按钮
    $(".product-check").click(function () {
        //closest(最靠近的)
        var goods = $(this).closest(".store").find(".product-check"); 
        var goodsC = $(this).closest(".store").find(".product-check:checked"); 
        var shopC = $(this).closest(".store").find(".store-check");
        if (goods.length == goodsC.length) { 
            shopC.prop('checked', true); 
        } else { 
            shopC.prop('checked', false);
            // 计算
            TotalPrice();
            // 计算
        }
    });

    // 点击店铺按钮
    $(".store-check").change(function () {
        if ($(this).prop("checked") == true) { //如果店铺按钮被选中
            $(this).parents(".store").find(".product-check").prop('checked', true); //店铺内的所有商品按钮也被选中
        } else { //如果店铺按钮不被选中
            $(this).parents(".store").find(".product-check").prop('checked', false); //店铺内的所有商品也不被全选
            TotalPrice();
        }
    });
    

    function TotalPrice() {
        var allprice = 0; //总价
        $(".store").each(function () { 
            var oprice = 0; //店铺总价
            $(this).find(".product-check").each(function () { 
                if ($(this).is(":checked")) { //如果该商品被选中
                    var price = parseFloat($(this).parents(".product").find(".product-one-price").text()); //得到商品的单价
                    console.log(price);
                    oprice += price;
                $(this).closest(".store").find(".store-total-price").text(oprice.toFixed(2));
                }
            });
            var oneprice = parseInt($(this).find(".store-total-price").text()); //得到每个店铺的总价
            allprice += oneprice; //计算所有店铺的总价
        });
        $(".total-price").text(allprice.toFixed(2)); //输出全部总价
    }

    // $(".content_gd").click(function(){
    //     if($(".content_none")){
    //     $(".content_xx").show();
    //     }else{
    //         $(".content_xx").hide();
    //     }
    // })
 $('.content_gd').click(function(){ 
     $('.content_xx').slideDown(200);});
// $('.content_gd').click(function(){ $('.content_xx').slideDown(200);
// })

</script>
</body>

</html>
